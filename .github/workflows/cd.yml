#name: CD-BUILD
#
#on:
#  workflow_dispatch:
#  push:
#    branches:
#      - main
#    paths:
#      - backend/**
#
#jobs:
#  deploy:
#    runs-on: ubuntu-latest
#    services:
#      postgres:
#        image: postgres
#        env:
#          POSTGRES_USER: root
#          POSTGRES_PASSWORD: 123
#          POSTGRES_DB: customer
#        ports:
#          - 5332:5432
#        options: >-
#          --health-cmd pg_isready
#          --health-interval 10s
#          --health-timeout 5s
#          --health-retries 5
#    defaults:
#       run:
#         working-directory: ./backend
#
#    steps:
#      - uses: actions/checkout@v3
#      - uses: actions/setup-java@v3
#        with:
#          distribution: 'temurin'
#          java-version: '17'
#          cache:  'maven'
#      - name: Login Ato Docker Hub
#        uses: docker/login-action@v2
#        with:
#          username: ${{ secrets.DOCKERHUB_USERNAME }}
#          password: ${{ secrets.DOCKERHUB_ACCESS_TOKEN }}
#      - name: Set Build number
#        id: build-number
#        run: echo "BUILD_NUMBER=$(date '+%d.%m.%Y.%H.%M.%S')" >> $GITHUB_OUTPUT
#      - name: Build package push with maven
#        run: mvn -ntp -B verify -Ddocker.image.tag=${{steps.build-number.outputs.BUILD_NUMBER}} jib:build
